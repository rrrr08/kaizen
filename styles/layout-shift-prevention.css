// Layout Shift Prevention Utilities

/**
 * Add these CSS classes to your global styles to prevent layout shifts
 */

/* Prevent layout shift for images */
.img-container {
  position: relative;
  width: 100%;
}

.img-container::before {
  content: '';
  display: block;
  padding-bottom: var(--aspect-ratio, 100%);
}

.img-container img {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Aspect ratio utilities */
.aspect-square { --aspect-ratio: 100%; }
.aspect-video { --aspect-ratio: 56.25%; }
.aspect-4-3 { --aspect-ratio: 75%; }
.aspect-16-9 { --aspect-ratio: 56.25%; }
.aspect-21-9 { --aspect-ratio: 42.86%; }

/* Skeleton loaders to reserve space */
.skeleton {
  background: linear-gradient(
    90deg,
    #f0f0f0 25%,
    #e0e0e0 50%,
    #f0f0f0 75%
  );
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* Prevent font loading shift */
.font-loading {
  visibility: hidden;
}

.font-loaded {
  visibility: visible;
}

/* Reserve space for dynamic content */
.min-h-screen-safe {
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height */
}

/* Prevent reflow from scrollbars */
html {
  overflow-y: scroll;
  scrollbar-gutter: stable;
}

/* Smooth scroll without layout shift */
html {
  scroll-behavior: smooth;
  scroll-padding-top: 80px; /* Account for fixed navbar */
}

/* Prevent CLS from ads/embeds */
.ad-container,
.embed-container {
  min-height: 250px; /* Reserve minimum space */
}

/* Image loading optimization */
img {
  content-visibility: auto;
}

/* Reduce layout shift from lazy-loaded images */
img[loading="lazy"] {
  min-height: 200px;
  background: #f0f0f0;
}
