# ğŸ“Š Data Architecture Diagram

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    YOUR ADMIN PAGES                             â”‚
â”‚                                                                 â”‚
â”‚  /admin/notifications    /admin/push-notifications             â”‚
â”‚  /admin/dashboard        /admin/analytics                       â”‚
â”‚  /admin/users            /admin/orders                          â”‚
â”‚  /admin/products         /admin/events                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                             â”‚
             â†“                                             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  React Components  â”‚                    â”‚  Firebase Functions  â”‚
    â”‚  (Admin UI)        â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  (lib/firebase.ts)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                                                      â†“
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚   Firestore Collections     â”‚
                                    â”‚                             â”‚
                                    â”‚  âœ… notifications          â”‚
                                    â”‚  âœ… campaigns              â”‚
                                    â”‚  âœ… orders                 â”‚
                                    â”‚  âœ… products               â”‚
                                    â”‚  âœ… events                 â”‚
                                    â”‚  âœ… users                  â”‚
                                    â”‚  âœ… analytics              â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

### Current Setup (With Mock Data)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Admin Pages                              â”‚
â”‚         /admin/notifications                                 â”‚
â”‚         /admin/push-notifications                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Firebase Functions   â”‚
         â”‚                       â”‚
         â”‚ getNotificationHistoryâ”‚
         â”‚ addNotification()     â”‚
         â”‚ getCampaigns()        â”‚
         â”‚ addCampaign()         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Firestore Database   â”‚
         â”‚                       â”‚
         â”‚  notifications â”      â”‚
         â”‚  â”œâ”€ Mock Doc 1 â”‚      â”‚
         â”‚  â”œâ”€ Mock Doc 2 â”‚      â”‚
         â”‚  â””â”€ Mock Doc 3 â”‚      â”‚
         â”‚                â”‚      â”‚
         â”‚  campaigns    â”€â”˜      â”‚
         â”‚  â”œâ”€ Mock Doc 1        â”‚
         â”‚  â”œâ”€ Mock Doc 2        â”‚
         â”‚  â””â”€ Mock Doc 3        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Future Setup (With Real Data)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Your Real Data Source                                â”‚
â”‚    (API, Database, Marketing Platform, etc.)                 â”‚
â”‚         your-api.com/notifications                           â”‚
â”‚         hubspot.com/campaigns                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Sync Function        â”‚
         â”‚  (Your Code)          â”‚
         â”‚                       â”‚
         â”‚  Fetch Real Data â”€â”€â”  â”‚
         â”‚  Map to Schema    â”‚  â”‚
         â”‚  Save to Firestore   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Firebase Functions   â”‚
         â”‚  addNotification()    â”‚
         â”‚  addCampaign()        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Firestore Database   â”‚
         â”‚                       â”‚
         â”‚  notifications        â”‚
         â”‚  â”œâ”€ Real Data 1       â”‚
         â”‚  â”œâ”€ Real Data 2       â”‚
         â”‚  â””â”€ Real Data 3       â”‚
         â”‚                       â”‚
         â”‚  campaigns            â”‚
         â”‚  â”œâ”€ Real Data 1       â”‚
         â”‚  â”œâ”€ Real Data 2       â”‚
         â”‚  â””â”€ Real Data 3       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Firebase Functions   â”‚
         â”‚  getNotificationHistory
         â”‚  getCampaigns()       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Admin Pages Display  â”‚
         â”‚  (Shows Real Data!)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Collections Structure

### notifications Collection
```
notifications/
â”œâ”€â”€ {docId-1}
â”‚   â”œâ”€â”€ title: "50% Off Sale"
â”‚   â”œâ”€â”€ message: "Get 50% off..."
â”‚   â”œâ”€â”€ type: "offer"
â”‚   â”œâ”€â”€ recipientType: "all"
â”‚   â”œâ”€â”€ recipientCount: 1250
â”‚   â”œâ”€â”€ sentAt: "2025-12-21T10:00:00Z"
â”‚   â”œâ”€â”€ actionUrl: "/shop"
â”‚   â””â”€â”€ createdAt: Timestamp(2025-12-21T10:00:00Z)
â”‚
â”œâ”€â”€ {docId-2}
â”‚   â”œâ”€â”€ title: "New Event Added"
â”‚   â”œâ”€â”€ message: "Check out our new virtual event..."
â”‚   â”œâ”€â”€ type: "info"
â”‚   â”œâ”€â”€ recipientType: "all"
â”‚   â”œâ”€â”€ recipientCount: 1250
â”‚   â”œâ”€â”€ sentAt: "2025-12-20T10:00:00Z"
â”‚   â””â”€â”€ createdAt: Timestamp(2025-12-20T10:00:00Z)
â”‚
â””â”€â”€ {docId-3}
    â”œâ”€â”€ title: "Welcome to Joy Juncture!"
    â”œâ”€â”€ message: "Welcome! Start exploring..."
    â”œâ”€â”€ type: "success"
    â”œâ”€â”€ recipientType: "all"
    â”œâ”€â”€ recipientCount: 1250
    â”œâ”€â”€ sentAt: "2025-12-19T10:00:00Z"
    â””â”€â”€ createdAt: Timestamp(2025-12-19T10:00:00Z)
```

### campaigns Collection
```
campaigns/
â”œâ”€â”€ {docId-1}
â”‚   â”œâ”€â”€ title: "Flash Sale Alert"
â”‚   â”œâ”€â”€ message: "Limited time: 60% off..."
â”‚   â”œâ”€â”€ status: "sent"
â”‚   â”œâ”€â”€ recipientCount: 1250
â”‚   â”œâ”€â”€ deliveredCount: 1150
â”‚   â”œâ”€â”€ interactionCount: 340
â”‚   â”œâ”€â”€ image: "https://..."
â”‚   â”œâ”€â”€ priority: "high"
â”‚   â””â”€â”€ createdAt: "2025-12-21T10:00:00Z"
â”‚
â”œâ”€â”€ {docId-2}
â”‚   â”œâ”€â”€ title: "New Collection Launch"
â”‚   â”œâ”€â”€ message: "Discover our newest games..."
â”‚   â”œâ”€â”€ status: "sent"
â”‚   â”œâ”€â”€ recipientCount: 1250
â”‚   â”œâ”€â”€ deliveredCount: 1200
â”‚   â”œâ”€â”€ interactionCount: 280
â”‚   â”œâ”€â”€ priority: "normal"
â”‚   â””â”€â”€ createdAt: "2025-12-20T10:00:00Z"
â”‚
â””â”€â”€ {docId-3}
    â”œâ”€â”€ title: "Weekend Special"
    â”œâ”€â”€ message: "Double points on all purchases..."
    â”œâ”€â”€ status: "scheduled"
    â”œâ”€â”€ recipientCount: 1250
    â”œâ”€â”€ deliveredCount: 0
    â”œâ”€â”€ interactionCount: 0
    â”œâ”€â”€ priority: "high"
    â””â”€â”€ createdAt: "2025-12-19T10:00:00Z"
```

---

## Component Interaction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Admin Notifications Page     â”‚
â”‚  /admin/notifications            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                                      â”‚
           â†“                                      â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Send Form      â”‚              â”‚  History Display     â”‚
    â”‚                 â”‚              â”‚                      â”‚
    â”‚ â€¢ Title Input   â”‚              â”‚ â€¢ Notification List  â”‚
    â”‚ â€¢ Message Input â”‚              â”‚ â€¢ Date Sorted        â”‚
    â”‚ â€¢ Type Select   â”‚              â”‚ â€¢ Color Coded        â”‚
    â”‚ â€¢ Send Button   â”‚              â”‚ â€¢ Pagination         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                   â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ loadNotificationHistoryâ”‚
                  â”‚  (async function)      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ getNotificationHistory â”‚
                  â”‚  (Firebase Function)   â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Firestore Query       â”‚
                  â”‚                        â”‚
                  â”‚  collection('notif')   â”‚
                  â”‚  orderBy('sentAt')     â”‚
                  â”‚  getDocs()             â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Document Array        â”‚
                  â”‚  [                     â”‚
                  â”‚    {title, message...},â”‚
                  â”‚    {title, message...},â”‚
                  â”‚    {title, message...} â”‚
                  â”‚  ]                     â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  setHistory(data)      â”‚
                  â”‚  (React State Update)  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Render in UI          â”‚
                  â”‚  (History Display)     â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Integration Pattern

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Initialization (One-Time Setup)    â”‚
â”‚                                    â”‚
â”‚ curl http://localhost:3000/api/    â”‚
â”‚   admin/init-mock-data             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ route.ts (GET)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ initializeAllMockData()â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ initializeNotificationsMockData
    â”‚ initializeCampaignsMockData   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ addDoc(notifications, {...}) â”‚
    â”‚ addDoc(campaigns, {...})     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Firestore Collections  â”‚
    â”‚ Created & Populated    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Function Call Chain

```
User Action in Admin Page
  â”‚
  â”œâ”€ handleSendNotification()
  â”‚  â”‚
  â”‚  â””â”€ addNotification({...})
  â”‚     â”‚
  â”‚     â”œâ”€ collection(db, 'notifications')
  â”‚     â”œâ”€ addDoc(...)
  â”‚     â””â”€ return docId
  â”‚
  â””â”€ loadNotificationHistory()
     â”‚
     â””â”€ getNotificationHistory()
        â”‚
        â”œâ”€ collection(db, 'notifications')
        â”œâ”€ query(..., orderBy('sentAt', 'desc'))
        â”œâ”€ getDocs(q)
        â””â”€ return NotificationHistory[]
              â”‚
              â””â”€ setHistory(data)
                 â”‚
                 â””â”€ Re-render UI
```

---

## Data Transformation Pipeline

```
Raw Data Input
  â”‚
  â”œâ”€ Title: "50% Off Sale"
  â”œâ”€ Message: "Get 50% off..."
  â”œâ”€ Type: "offer"
  â”œâ”€ Recipients: 1250
  â””â”€ URL: "/shop"
  â”‚
  â†“
Firestore Function (addNotification)
  â”‚
  â”œâ”€ Add auto timestamp
  â”œâ”€ Add generated ID
  â”œâ”€ Validate data
  â””â”€ Save to Firestore
  â”‚
  â†“
Firestore Collection
  â”‚
  â”œâ”€ id: auto-generated
  â”œâ”€ title: "50% Off Sale"
  â”œâ”€ message: "Get 50% off..."
  â”œâ”€ type: "offer"
  â”œâ”€ recipientCount: 1250
  â”œâ”€ actionUrl: "/shop"
  â”œâ”€ sentAt: ISO timestamp
  â””â”€ createdAt: Firestore timestamp
  â”‚
  â†“
Retrieved from Firestore
  â”‚
  â”œâ”€ Convert timestamps
  â”œâ”€ Map to interface
  â”œâ”€ Return array
  â””â”€ Sort by date
  â”‚
  â†“
React Component Display
  â”‚
  â”œâ”€ Render notification item
  â”œâ”€ Show type color
  â”œâ”€ Show timestamp
  â”œâ”€ Show action button
  â””â”€ Update state
```

---

## Technology Stack Visualization

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Next.js 16        â”‚
                    â”‚   (Framework)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚             â”‚             â”‚
                â†“             â†“             â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ React UI â”‚  â”‚ TypeScriptâ”‚  â”‚ Firestore   â”‚
        â”‚Componentsâ”‚  â”‚ Types    â”‚  â”‚ Database    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚             â”‚             â”‚
                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                â”‚             â”‚             â”‚
                â†“             â†“             â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Firebase Realtime Connection          â”‚
         â”‚  (Auth, Firestore, Storage)            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                         â”‚
                â†“                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Collections  â”‚         â”‚   Documents  â”‚
        â”‚              â”‚         â”‚              â”‚
        â”‚ â€¢notifications        â”‚ â€¢notifications
        â”‚ â€¢campaigns   â”‚         â”‚ â€¢campaigns
        â”‚ â€¢orders      â”‚         â”‚ â€¢orders
        â”‚ â€¢products    â”‚         â”‚ â€¢products
        â”‚ â€¢events      â”‚         â”‚ â€¢events
        â”‚ â€¢users       â”‚         â”‚ â€¢users
        â”‚ â€¢analytics   â”‚         â”‚ â€¢analytics
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## State Management Flow

```
Component Mounts
  â”‚
  â†“
useEffect Hook
  â”‚
  â”œâ”€ Call loadNotificationHistory()
  â”‚
  â””â”€ First Time Load
     â”‚
     â†“
  Async Firestore Query
     â”‚
     â”œâ”€ Query collection
     â”œâ”€ Apply filters
     â”œâ”€ Sort results
     â””â”€ Parse documents
     â”‚
     â†“
  Return Data Array
     â”‚
     â†“
  setHistory(data)
     â”‚
     â”œâ”€ Update React State
     â””â”€ Trigger Re-render
     â”‚
     â†“
  Component Re-renders
     â”‚
     â”œâ”€ Map history array
     â”œâ”€ Render each item
     â””â”€ Show history list
     â”‚
     â†“
User Submits Form
  â”‚
  â”œâ”€ Validate input
  â”œâ”€ Call handleSendNotification
  â”‚
  â””â”€ Async Firebase Write
     â”‚
     â”œâ”€ addNotification(data)
     â”‚
     â”œâ”€ Write to Firestore
     â”‚
     â””â”€ Return document ID
     â”‚
     â†“
  Update State Optimistically
     â”‚
     â”œâ”€ Create new item object
     â”œâ”€ Add to history array
     â”œâ”€ setHistory([newItem, ...old])
     â”‚
     â””â”€ Trigger Re-render
     â”‚
     â†“
  Display New Notification
     â”‚
     â”œâ”€ Show at top of list
     â”œâ”€ Update timestamp
     â””â”€ Enable action buttons
```

---

This comprehensive diagram shows how all the pieces fit together!
